---
title: '[Python] Flask'
description: íŒŒì´ì¬ì˜ Flaskì™€ Server, Jinja Templateê³¼ Bootstrap ì‚¬ìš©
categories:
 - Data Engineering
tags: [Data Engineering, Python, Flask, Jinja, Bootstrap]
mathjax: enable
# 0ï¸âƒ£1ï¸âƒ£2ï¸âƒ£3ï¸âƒ£4ï¸âƒ£5ï¸âƒ£6ï¸âƒ£7ï¸âƒ£8ï¸âƒ£9ï¸âƒ£ğŸ”Ÿ
---

# 1ï¸âƒ£ Reference
- [HTML, CSS, JavaScriptê°€ ë­”ê°€ìš”?](https://www.youtube.com/watch?v=ffENjt7aEdc)
- [ì •ì  ì›¹ì€ ë­ê³  ë™ì  ì›¹ì€ ë­”ê°€ìš”?](https://www.youtube.com/watch?v=C06xRvXIAUk)
- [ì„œë²„ë€ ë¬´ì—‡ì¸ê°€ìš”?](https://www.youtube.com/watch?v=R0YJ-r-qLNE)
- [IPì£¼ì†Œì™€ IPë¡œ ì•Œ ìˆ˜ ìˆëŠ” ëª¨ë“  ê²ƒ(feat. IPv6) - [é«˜ì§€ì‹] ê±°ë‹ˆ](https://www.youtube.com/watch?v=IAS3U5ZiI8c)
- [Flask](https://flask.palletsprojects.com/en/1.1.x/)
- [Jinja 2](https://jinja.palletsprojects.com/en/2.11.x/)
- [Bootstrap](https://getbootstrap.com/)
- [(ì„ íƒ) w3schools Boostrap 4 Tutorial](https://www.w3schools.com/bootstrap4/default.asp)
- [(ì„ íƒ) w3schools HTML Tutorial](https://www.w3schools.com/html/default.asp)
- [(ì„ íƒ) w3schools CSS Tutorial](https://www.w3schools.com/css/default.asp)

# 2ï¸âƒ£ Flask
- ì›¹ ì–´í”Œë¦¬ìºì´ì…˜ í”„ë ˆì„ì›Œí¬
- Djangoì— ë¹„í•´ ê°€ë²¼ì›€

## Flaskë€?
- [Flask Homepage](https://flask.palletsprojects.com/en/1.1.x/)
- Micro Web Framework
- ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•  ìˆ˜ ìˆë„ë¡ ì›¹ ì„œë¹„ìŠ¤(Web Service)ë‚˜ ì›¹ API(Web API) ë“±ì„ ì œê³µí•˜ê³  ì›¹ ê°œë°œê³¼ ë°°í¬ë¥¼ í•  ìˆ˜ ìˆëŠ” íŠ¹ì • ë°©ë²• ì œê³µ
- Jinja, Werkzeug, Flask-SQLAlchemy ë“± ë‹¤ì–‘í•œ íŒ¨í‚¤ì§€ë“¤ê³¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì´ ì¡´ì¬

## Flask ì‹œì‘

### ì„¤ì¹˜

```
$ pip install flask
```

### í´ë” ìƒì„±

```
flask_app
â””â”€â”€ __init__.py
```

### APP ìƒì„±

```py
# __init__.py

from flask import Flask

app = Flask(__name__)

@app.route('/')
def index():
    return 'Hello World!'

```

- CLI ì‹¤í–‰

```
$ FLASK_APP=flask_app flask run

```

#### ë¼ìš°íŠ¸ ê¸°ëŠ¥

#### HTTP Request ë©”ì†Œë“œ
- ê¸°ë³¸ì ì¸ Flask ë¼ìš°ë“œ ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ë©´ GET, HEAD, OPTIONS ë©”ì†Œë“œë¥¼ í—ˆìš©í•œë‹¤.
- ì´ì™¸ì˜ ë©”ì†Œë“œë¥¼ í†µê°€í•˜ê¸° ìœ„í•´ì„œëŠ” `methods` ì¸ìˆ˜ë¥¼ ì¶”ê°€

```py
@app.route('/', methods=['POST', 'GET'])
def index():
    ...
```

- GET ê³¼ POST ë¼ëŠ” ë©”ì†Œë“œê°€ í†µê³¼ë˜ì§€ë§Œ HEAD ì™€ OPTIONS ë¼ëŠ” ë©”ì†Œë“œëŠ” ì´ì œ ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.

#### ì„¸ë¶€ ì—”ë“œ í¬ì¸íŠ¸

```py
@app.route('/user/', defaults={'user_id':0})
@app.route('/user/<user_id>')
def user_index(user_id):
    return f'Your ID is : {user_id}'
```

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-09-29 14 00 33](https://user-images.githubusercontent.com/79494088/135206070-24afbaa7-f011-49a6-a6d7-b39e41f11e8a.png)


### Blueprint
- ë¼ìš°íŠ¸ë¥¼ ê¸°ëŠ¥ë³„ë¡œ ë‚˜ëˆ  ë¸”ë£¨í”„ë¦°íŠ¸ ê¸°ëŠ¥ì„ ì‚¬ìš©í•œë‹¤.
- í´ë” êµ¬ì¡°

```
flask_app
â”œâ”€â”€ __init__.py
â””â”€â”€ routes
    â””â”€â”€ main_routes.py
```

```py
# main_route.py
from flask import Blueprint

bp = Blueprint('main', __name__, url_prefix='/main')

@bp.route('/')
def index():
    return 'Hello main!'
```

- 'main' : ë¸”ë£¨í”„ë¦°íŠ¸ì˜ ëª…ì¹­
- __name__ : ë¸”ë£¨í”„ë¦°íŠ¸ì˜ import ì´ë¦„
- url_prefix='/main' : URL ì ‘ë‘ì–´ ì„¤ì • (í•´ë‹¹ ë¸”ë£¨í”„ë¦°íŠ¸ì˜ ë¼ìš°íŠ¸ëŠ” URL ì•ì— '/main'ì´ ìë™ìœ¼ë¡œ ë¶™ëŠ”ë‹¤.)

```py
# __init__.py íŒŒì¼ ìˆ˜ì •
from flask import Flask
from flask_app.routes.main_route import bp as main_bp # ì¶”ê°€

app = Flask(__name__)
app.register_blueprint(main_bp) # ì¶”ê°€

@app.route('/')
def index():
    return 'Hello World!'

@app.route('/user/', defaults={'user_id':0})
@app.route('/user/<user_id>')
def user_index(user_id):
    return f'Your ID is : {user_id}'
```

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-09-29 13 59 42](https://user-images.githubusercontent.com/79494088/135206005-ccfa0292-a6c7-4b0d-b1d4-11a5be193e35.png)

## APP Factory
- circular import ë¥¼ í”¼í•˜ê¸° ìœ„í•´ì„œ Flask ì—ì„œëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ íŒ©í† ë¦¬ íŒ¨í„´ì„ ì¶”ì²œ
- ë§ê·¸ëŒ€ë¡œ 'ê³µì¥'ì„ ì„¸ìš°ëŠ” ê±´ë°, í´ë¡œë²Œí•œ ì»¨í…ìŠ¤íŠ¸ì—ì„œ appì„ ì„ ì–¸í•˜ê³  ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ì—¬ëŸ¬ê°œì˜ ì•±ì„ ë™ì‹œì— ì‚¬ìš©í•˜ê±°ë‚˜ íŒŒì¼ì˜ ì¼ë¶€ë¶„ë§Œ ì‚¬ìš©í•˜ê²Œ ë ë•Œë„ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
- ì´ëŸ° ì ì¬ì ì¸ ë¬¸ì œì ì„ í”¼í•˜ê¸° ìœ„í•´ í•¨ìˆ˜ë¥¼ ë”°ë¡œ ë§Œë“ ë‹¤.
- ê¸°ë³¸ì ì¸ íŒ¨í„´

```py
from flask import Flask

def create_app():
    app = Flask(__name__)

    from yourapplication.views.admin import admin
    from yourapplication.views.frontend import frontend
    app.register_blueprint(admin)
    app.register_blueprint(frontend)

    return app

if __name__ == "__main__":
  app = create_app()
  app.run()
```

# 3ï¸âƒ£ Jinja

## Flaskì˜ Html ë Œë”ë§
- templateì´ë¼ëŠ” í´ë” ìƒì„± í›„ index.htmlì„ ë§Œë“ ë‹¤.

```html
<html>
  <head>
    <title>
      New HTML Page
    </title>
  </head>
  <body>
    <h1>I am in templates folder</h1>
  </body>
</html>
```

- ì´ëŸ¬í•œ í˜•íƒœë¡œ index.htmlì„ ë³´ì—¬ì¤„ ìˆ˜ ìˆë‹¤.

```py
from flask import Flask, render_template

app = Flask(__name__)

@app.route('/')
def index():
  return render_template('index.html')
```

## Jinjaë€?
- Web Template Engine : ë§ì¶¤í˜• ì›¹ í˜ì´ì§€ë¥¼ ìë™ìœ¼ë¡œ ìƒì‚°í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤.

## Jinja í‘œí˜„
- ì¤‘ê´„í˜¸ '{}'fmf ë§ì´ ì´ìš©

```html
<body>
  <h1>{{ title }}</h1>
</body>
```

{% raw %}
- {% ... %} : êµ¬ë¬¸ì— ì‚¬ìš©(if, for ë“±).
- {{ ... }} : í…œí”Œë › ê²°ê³¼ (html)ì— ì¶œë ¥í•  í‘œí˜„(ë³€ìˆ˜ ë“±).
- {# ... #} : ì£¼ì„ ì²˜ë¦¬í•  ë•Œ ì‚¬ìš©


## ë³€ìˆ˜ ë„˜ê¸°ê¸°

```py
(... ìƒëµ ...)
@app.route('/')
def index():
    apple = 'red'
    apple_count = 10
    return render_template('index.html', fruit_color=apple, number=apple_count)
```

```html
<body>
  <h2>Apple is {{ fruit_color }}</h2>
  <h2>{{ apple_count }} ê°œì˜ ê³¼ì¼ì´ ìˆìŠµë‹ˆë‹¤.</h2>
</body>
```

## ê¸°ëŠ¥
- [Jinja ê³µì‹ë¬¸ì„œ](https://jinja.palletsprojects.com/en/2.11.x/templates/#variables)

### ê°ì²´ íƒœê·¸

```py
var=[1, 2, 3]
fruits = { 'apple' : 'red', 'banana' : 'yellow' }
vegetables = [ 'cucumber', 'spinach' ]
```

```html
{{ var }}
{{ fruits.apple }}
{{ vegetables[0] }}
```

### if êµ¬ë¬¸

```html
{% if True %}
<h1>It is True</h1>
{% elif False %}
<h1>It is False</h1>
{% else %}
<h1>It is not True</h1>
{% endif %}
```

### for êµ¬ë¬¸

```py
item_list = ['book', 'keyboard', 'window']
```

```html
{% for item in item_list %}
<p>{{ item }}</p>
{% endfor %}
```

**loop ì†ì„±**	|**ì„¤ëª…**
loop.index	|ë°˜ë³µ ìˆœì„œ 1ë¶€í„° 1ì”© ì¦ê°€
loop.index0	|ë°˜ë³µ ìˆœì„œ 0ë¶€í„° 1ì”© ì¦ê°€
loop.first	|ë°˜ë³µ ìˆœì„œê°€ ì²˜ìŒì¼ ê²½ìš° True ì•„ë‹ˆë©´ False
loop.last	|ë°˜ë³µ ìˆœì„œê°€ ë§ˆì§€ë§‰ì¼ ê²½ìš° True ì•„ë‹ˆë©´ False

```html
{% for item in item_list %}
<p>ì¸ë±ìŠ¤ : {{ loop.index0 }}, ì´ë¦„ : {{ item }}</p>
{% endfor %}
```

## ìƒì†
- ë°˜ë³µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ë¶€ë¶„ì„ í•˜ë‚˜ë¡œ ë¬¶ì–´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œë” í•´ì£¼ëŠ” ê¸°ëŠ¥
- {% extends %}
- {% block %} ... {% endblock %}

### ìì‹ ìƒì†
- ë¶€ëª¨ í…œí”Œë ›ì˜ ê²½ë¡œë¥¼ ìì‹ í…œí”Œë › íŒŒì¼ì˜ ì²«ì¤„ì— ì ì–´ì£¼ê²Œ ë˜ë©´ Jinjaì˜ í…œí”Œë › ì—”ì§„ì´ í•´ë‹¹ íŒŒì¼ì„ ì´ìš©

```html
<!-- ë¶€ëª¨ í…œí”Œë¦¿ -->
<!DOCTYPE html>
<html lang="en">
<head>
    {% block head %}
    <title>{% block title %}{% endblock %} - My Webpage</title>
    {% endblock %}
</head>
<body>
    <div id="content">{% block content %}{% endblock %}</div>
    <div id="footer">
        {% block footer %}
        &copy; Copyright 2008 by <a href="http://domain.invalid/">you</a>.
        {% endblock %}
    </div>
</body>
</html>

<!-- ìì‹ í…œí”Œë¦¿ -->
{% extends "base.html" %}
{% block title %}Index{% endblock %}
{% block head %}
    {{ super() }}
{% endblock %}
{% block content %}
    <h1>Index</h1>
    <p class="important">
      Welcome to my awesome homepage.
    </p>
{% endblock %}
```

### ì§„ì ë¸”ë¡
- ìƒì†ëœ íŒŒì¼ì—ì„œ ë³€ê²½í•  ìˆ˜ ìˆëŠ” ì¼ì¢…ì˜ HTML 'ë¸”ë¡'ì„ ì§€ì •
- ë¶€ëª¨ì˜ 'head' ë¸”ë¡ ë‚´ìš©ì„ ê°€ì ¸ì˜¤ê³  ì‹¶ì„ ë•Œ

```html
{% extends "base.html" %}
{% block title %}Index{% endblock %}
{% block head %}
    {{ super() }}
    <h1>ìì‹ ë¸”ë¡ì—ì„œ ì¶œë ¥í•œ h1 ì…ë‹ˆë‹¤.</h1>
{% endblock %}

(... ìƒëµ ...)
```

# 4ï¸âƒ£ Boostrap

```html
<!DOCTYPE html>
<html>
  <head>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">Navbar</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">Home</a>
            </li>
            <li class="nav-item">
            <a class="nav-link" href="#">Link</a>
            </li>
            <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Dropdown
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li><a class="dropdown-item" href="#">Another action</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="#">Something else here</a></li>
            </ul>
            </li>
        </ul>
        <form class="d-flex">
            <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success" type="submit">Search</button>
        </form>
        </div>
    </div>
    </nav>
  </body>
</html>
```

{% endraw %}