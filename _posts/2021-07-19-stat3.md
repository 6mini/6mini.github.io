---
title: '[Statistics] ì‹ ë¢°êµ¬ê°„(Confidence Intervals)'
description: ANOVAì™€ CLTì˜ ì˜ë¯¸ì™€ ì‹ ë¡¸êµ¬ê°„ì˜ ëª©ì ê³¼ ì‚¬ìš©ì˜ˆì‹œ, ì¶”ì •ëœ í†µê³„ì¹˜ì— ëŒ€í•œ ì‹ ë¢°êµ¬ê°„ ê³„ì‚°
categories:
 - Fundamentals to DS
tags: [Statistics, ANOVA, CLT, Confidence Intervals, ì‹ ë¢°êµ¬ê°„]
mathjax: enable
# 0ï¸âƒ£1ï¸âƒ£2ï¸âƒ£3ï¸âƒ£4ï¸âƒ£5ï¸âƒ£6ï¸âƒ£7ï¸âƒ£8ï¸âƒ£9ï¸âƒ£ğŸ”Ÿ
---

# ANOVA
- 2ê°œ ì´ìƒ ê·¸ë£¹ì˜ í‰ê· ì— ì°¨ì´ê°€ ìˆëŠ”ì§€ë¥¼ ê°€ì„¤ ê²€ì •í•˜ëŠ” ë°©ë²•

## Multiple Comparision
- 2ê°œ ì´ìƒì˜ ê·¸ë£¹ì„ ë¹„êµí•  ë•Œ ì—¬ëŸ¬ë²ˆ T-Testë¥¼ í•˜ê²Œ ë˜ë©´ ì—ëŸ¬ê°€ ë‚  í™•ë¥ ì´ ì»¤ì§„ë‹¤.

>mê°œ ê·¸ë£¹ì— ëŒ€í•œ ê°€ì„¤ ê²€ì •ì´ë¼ë©´ 
>
>$\bar{\alpha} =  {1 - (1 - \alpha)}^{m}$ , $\bar{\alpha} \leq m \cdot {\alpha}$ ë¼ëŠ” ê²ƒì´ ìˆ˜í•™ì ìœ¼ë¡œ ì¦ëª…ë˜ì–´ ìˆë‹¤.

- ì´ë ‡ê¸° ë•Œë¬¸ì— ì—¬ëŸ¬ê°œì˜ ê·¸ë£¹ì„ í•œêº¼ë²ˆì— ë¹„êµí•˜ëŠ” ë°©ë²•ì´ í•„ìš”í•˜ë‹¤.

```python
import numpy as np

g1 = np.array([0, 31, 6, 26, 40])
g2 = np.array([24, 15, 12, 22, 5])
g3 = np.array([32, 52, 30, 18, 36])

from scipy.stats import f_oneway

f_oneway(g1, g2, g3) # pvalue = 0.11 
```

# Many Samples

## í° ìˆ˜ì˜ ë²•ì¹™
- sample ë°ì´í„°ì˜ ìˆ˜ê°€ ì»¤ì§ˆ ìˆ˜ë¡, sampleì˜ í†µê³„ì¹˜ëŠ” ì ì  ëª¨ì§‘ë‹¨ì˜ ëª¨ìˆ˜ì™€ ê°™ì•„ì§„ë‹¤.

```python
import numpy as np
import matplotlib.pyplot as plt
import pandas as pd

population = np.random.normal(50, 10, 1000) # mu = 50, sd = 1, 
population.var() 
# 94.67645805499781
np.random.choice(population, 5).var() # 46.4
np.random.choice(population, 15).var() # 106.1
np.random.choice(population, 50).var() # 107.8
np.random.choice(population, 100).var() # 103.0
np.random.choice(population, 200).var() # 104.0


dat = []

for i in np.arange(start = 5, stop = 995, step = 5) :
  s = np.random.choice(population, i)
  dat.append(s.var())
dat

(pd
 .DataFrame(dat)
 .plot
 .line(color = '#4000c7')
 .axhline(y = 100, color = '#00da75')
 );
```

![](https://images.velog.io/images/6mini/post/96b3ee4d-c18e-4ecf-be20-d5e027989ae4/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-07-19%2018.02.22.png)

## CLT(Central Limit Theorem) : ì¤‘ì‹¬ê·¹í•œì •ë¦¬
 - Sample ë°ì´í„°ì˜ ìˆ˜ê°€ ë§ì•„ì§ˆ ìˆ˜ë¡, sampleì˜ í‰ê· ì€ ì •ê·œë¶„í¬ì— ê·¼ì‚¬í•œ í˜•íƒœë¡œ ë‚˜íƒ€ë‚œë‹¤.

 ![](https://images.velog.io/images/6mini/post/587bb0eb-2c54-4174-b22a-bd45bfbc7bf4/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-07-19%2021.47.22.png)

```python
sample_means1 = []
for x in range(50):
  coinflips = cdf['ì´ˆë¯¸ì„¸ë¨¼ì§€(ã/ã¥)'].sample(x)
  sample_means1.append(coinflips.mean())
  
sample_means2 = []
for x in range(200):
  coinflips = cdf['ì´ˆë¯¸ì„¸ë¨¼ì§€(ã/ã¥)'].sample(x)
  sample_means2.append(coinflips.mean())
  
sample_means3 = []
for x in range(700):
  coinflips = cdf['ì´ˆë¯¸ì„¸ë¨¼ì§€(ã/ã¥)'].sample(x)
  sample_means3.append(coinflips.mean())

sns.histplot(sample_means1, color = '#e74c3c');
plt.show()

sns.histplot(sample_means2, color = '#f39c12');
plt.show()

sns.histplot(sample_means3, color = '#27ae60');
plt.show()
```
![](https://images.velog.io/images/6mini/post/03484898-6f10-4467-bdd5-fe3c9046151e/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-07-19%2021.49.00.png)

# ì‹ ë¢°ë„
- ì‹ ë¢°ë„ê°€ 95% ë¼ëŠ” ì˜ë¯¸ëŠ” í‘œë³¸ì„ 100ë²ˆ ë½‘ì•˜ì„ë•Œ 95ë²ˆì€ ì‹ ë¢°êµ¬ê°„ ë‚´ì— ëª¨ì§‘ë‹¨ì˜ í‰ê· ì´ í¬í•¨

## ì‹ ë¢°êµ¬ê°„ì˜ ì„¤ì • ë° í•´ì„

![4](/assets/images/4.png)

- {% raw %} $\bar {x} \pm {t \cdot {s \over \sqrt{n}}}$ {% endraw %}

## CI with scipy

```python
np.random.seed(123)

data2 = np.random.normal(50, 10, 1000)

sample = np.random.choice(data2, 10)

from scipy.stats import t

# í‘œë³¸ì˜ í¬ê¸°
n = len(sample)
# ììœ ë„
dof = n-1
# í‘œë³¸ì˜ í‰ê· 
mean = np.mean(sample)
# í‘œë³¸ì˜ í‘œì¤€í¸ì°¨
sample_std = np.std(sample, ddof = 1)
# í‘œì¤€ ì˜¤ì°¨
std_err = sample_std / n ** 0.5 # sample_std / sqrt(n)

CI = t.interval(.95, dof, loc = mean, scale = std_err) # https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.t.html
print("95% ì‹ ë¢°êµ¬ê°„: ", CI)

# 95% ì‹ ë¢°êµ¬ê°„:  (37.93312500671013, 50.63689939897239)
```