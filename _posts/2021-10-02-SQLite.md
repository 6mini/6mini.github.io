---
title: '[SQLite3] index column ì¤‘ë³µ ë°©ì§€ ë° ì¸ì ë¯¸ì…ë ¥ì‹œ PK ê°’ ìë™ ì¦ê°€ in Python'
description: SQLiteì—ì„œ unique index columnì„ ì§€ì •í•˜ì—¬ ì¤‘ë³µì„ ë°©ì§€í•˜ê³ , ì¸ì ë¯¸ì…ë ¥ì‹œ Primary key ID ê°’ì„ ìë™ìœ¼ë¡œ ì¦ê°€ì‹œí‚¤ëŠ” ë°©ë²•
categories:
 - Did Unknown
tags: [Python, SQLite, unique index, authincrement, ì¤‘ë³µ ë°©ì§€]
mathjax: enable
# 0ï¸âƒ£1ï¸âƒ£2ï¸âƒ£3ï¸âƒ£4ï¸âƒ£5ï¸âƒ£6ï¸âƒ£7ï¸âƒ£8ï¸âƒ£9ï¸âƒ£ğŸ”Ÿ
---

# I Want!
- Primary key ê°’ì´ ì•„ë‹Œ ë‹¤ë¥¸ index columnì˜ ì¤‘ë³µì´ ë“¤ì–´ê°ì„ ë°©ì§€í•˜ê³  ì‹¶ì—ˆë‹¤.
- insert valuesì˜ ì¸ìê°’ìœ¼ë¡œ ì•„ë¬´ê²ƒë„ ë„£ì§€ ì•Šì•„ë„ IDê°’ì´ ìë™ìœ¼ë¡œ ì±„ì›Œì§€ê²Œ í•˜ê³  ì‹¶ì—ˆë‹¤.

# AUTOINCREMENT, UNIQUE INDEX ì‚¬ìš©

```py
import os
import sqlite3
DB_FILENAME = "twitter_db.sqlite3"
DB_FILEPATH = os.path.join(os.getcwd(), DB_FILENAME)

# ì»¤ë„¥íŠ¸ ë° ì»¤ì„œ ìƒì„±
conn = sqlite3.connect(DB_FILENAME)
cur = conn.cursor()

# ìŠ¤í‚¤ë§ˆ ìƒì„±(id ê°’ Auto increment ì„¤ì • : ì¸ìê°’ìœ¼ë¡œ ì•„ë¬´ê²ƒë„ ë„£ì§€ ì•Šì•„ë„ ìë™ìœ¼ë¡œ ì¤‘ë³µë˜ì§€ ì•Šê³  ì¦ê°€í•˜ì—¬ ì…ë ¥ë¨)
cur.execute("DROP TABLE IF EXISTS user;")
cur.execute("""CREATE TABLE user(
            id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
            screen_name VARCHAR
            );""")

cur.execute("DROP TABLE IF EXISTS tweet;")
cur.execute("""CREATE TABLE tweet(
            id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
            full_text VARCHAR,
            user_id INTEGER,
            FOREIGN KEY(user_id) REFERENCES user(id)
            );""")
```

- `CREATE UNIQUE INDEX` ë©”ì†Œë“œë¥¼ í†µí•´ ì¤‘ë³µê°’ì´ ìˆì„ ìˆ˜ ì—†ëŠ” columnìœ¼ë¡œ ë§Œë“¤ì–´ì¤€ë‹¤.

```py
cur.execute("CREATE UNIQUE INDEX nameindex ON user (screen_name);")
```

- `INSERT`ë¥¼ í•  ë•Œ ê¸°ì¡´ì— ìˆë˜ ì¤‘ë³µ ê°’ì„ ë„£ìœ¼ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•´ì•¼ í•˜ëŠ”ë°, `OR IGNORE INTO`ì™€ í•¨ê»˜ ì‚¬ìš©í•´ ëª…ë ¹ì–´ ì˜¤ë¥˜ ë°œìƒì„ ë¬´ì‹œí•˜ì—¬ ë¯¸ì—°ì— ì¤‘ë³µì„ ë°©ì§€

```py
def add_user(username, connection, cursor):
    cursor.execute("INSERT OR IGNORE INTO user (screen_name) VALUES (?)", (username,))
    connection.commit()
    cursor.execute("SELECT * FROM user WHERE screen_name = (?)", (username,))
    return cursor.fetchone()
```