---
title: '[SQL] NoSQL'
description: NoSQLì˜ ì •ì˜ì™€ êµ¬ì„±, ë°ì´í„° ì…ë ¥ ë° ì¶œë ¥
categories:
 - Data Engineering
tags: [Data Engineering, NoSQL, JSON, MongoDB, Pymongo]
mathjax: enable
# 0ï¸âƒ£1ï¸âƒ£2ï¸âƒ£3ï¸âƒ£4ï¸âƒ£5ï¸âƒ£6ï¸âƒ£7ï¸âƒ£8ï¸âƒ£9ï¸âƒ£ğŸ”Ÿ
---

# NoSQL

## ìœ ë˜
- RDBë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê³µí†µì ë§Œ ìˆìœ¼ë©´ MongoDB, CouchDB, ì¹´ì‚°ë“œë¼, LevelDB ë“± ì €ë§ˆë‹¤ ë‹¤ë¥¸ íŠ¹ì„±ì´ ìˆë‹¤.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-09-22 20 19 02](https://user-images.githubusercontent.com/79494088/134334434-3fd5f8b1-1a8f-4635-b772-705b18273710.png)

- ì¡°í•¸ ì˜¤ìŠ¤ì¹´ìŠ¨ì˜ RDB ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì—°êµ¬ì— ëŒ€í•œ ë…¼ì˜ íŠ¸ìœ„í„° í•´ì‹œíƒœê·¸ #NoSQL

## ë°°ê²½
- 2000ë…„ ì´ˆ ì›¹ í™˜ê²½ì—ì„œ ë°œìƒí•˜ëŠ” ë°ì´í„°ë¥¼ ë‹¤ë£¨ê¸° ìœ„í•´ ì‚¬ìš©

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-09-22 20 21 20](https://user-images.githubusercontent.com/79494088/134334820-94096981-4c7f-4434-8711-85a1bd418f5c.png)

- Web ì‹œì¥ì˜ ë°œì „ê³¼ í•¨ê»˜ ë°ì´í„° ì†ŒìŠ¤ì™€ ì–‘ì´ í­ë°œì ìœ¼ë¡œ ì¦ê°€
- ì›¹ ì„œë¹„ìŠ¤ì˜ ë°ì´í„°ëŠ” xml, jsonìœ¼ë¡œ ì²˜ë¦¬ë˜ëŠ”ë° RDBë¡œ ì²˜ë¦¬í•˜ê¸°ì— ì˜¤ë˜ ê±¸ë¦¬ê¸° ì‹œì‘
- í•˜ë‚˜ì˜ ì„œë²„ë¥¼ í¬ê²Œ ë§Œë“œëŠ” ê²ƒë³´ë‹¤, ì—¬ëŸ¬ ê°œì˜ ì„œë²„ë¥¼ ì—°ê²° ì‹œì¼œ í™•ì¥í•˜ëŠ” ë°©ë²•ì´ ë¹„ìš© ì ˆê°ì— ë”ìš± íš¨ê³¼ì  (ìˆ˜ì§ í™•ì¥ -> ìˆ˜í‰ í™•ì¥)

## RDB vs NoSQL
- ë§Œë“¤ì–´ì§„ ë°©ì‹, ì €ì¥í•˜ëŠ” ì •ë³´ì˜ ì¢…ë¥˜, ì €ì¥í•˜ëŠ” ë°©ë²• ë“±ì— ì°¨ì´ê°€ ìˆë‹¤.
- NoSQLì€ ë°ì´í„°ê°€ ê³ ì •ë˜ì–´ ìˆì§€ ì•Šì€ DB í˜•íƒœë“¤ì„ ì£¼ë¡œ ê°€ë¦¬í‚¨ë‹¤.
- RDBì—ì„œëŠ” ìŠ¤í‚¤ë§ˆê°€ ëšœë ·ì´ ë³´ì´ê³  í…Œì´ë¸” ê°„ì˜ ê´€ê³„ë¥¼ ì•Œ ìˆ˜ ìˆë‹¤.
- RDBì—ì„œ ë°ì´í„°ë¥¼ ì“¸ ë•Œ ìŠ¤í‚¤ë§ˆì— ë§ì¶˜ë‹¤ë©´, NoSQLì€ ìŠ¤í‚¤ë§ˆì— ë”°ë¼ ë°ì´í„°ë¥¼ ì½ì–´ì˜¨ë‹¤.

### ì°¨ì´ì 

#### Storage
- RDB : SQLì„ ì´ìš©í•´ ë°ì´í„°ë¥¼ í…Œì´ë¸”ì— ì €ì¥, ë¯¸ë¦¬ ì‘ì„±ëœ ìŠ¤í‚¤ë§ˆë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì •í•´ì§„ í˜•ì‹ì— ë§ê²Œ ì €ì¥
- NoSQL : key-value, document, graph, wide-column í˜•ì‹ ë“±ì˜ ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì €ì¥

#### Schema
- SQL : í˜•ì‹ì´ ê³ ì •ëœ ìŠ¤í‚¤ë§ˆ í•„ìš”. ì²˜ë¦¬í•˜ë ¤ëŠ” ë°ì´í„° ì†ì„±ë³„ë¡œ ì—´ì— ëŒ€í•œ ì •ë³´ê°€ ë¯¸ë¦¬ ì •í•´ì ¸ì•¼ í•œë‹¤ëŠ” ì˜ë¯¸. ìŠ¤í‚¤ë§ˆëŠ” ë‚˜ì¤‘ì— ë³€ê²½í•  ìˆ˜ ìˆì§€ë§Œ, DB ì „ì²´ë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜ ì˜¤í”„ë¼ì¸ìœ¼ë¡œ ì „í™˜í•  í•„ìš”ê°€ ìˆë‹¤.
- NoSQL : ìŠ¤í‚¤ë§ˆì˜ í˜•íƒœê°€ ë™ì . í–‰ì„ ì¶”ê°€í•  ë•Œ ì¦‰ì‹œ ì—´ì„ ì¶”ê°€í•  ìˆ˜ ìˆê³ , ê°œë³„ ì†ì„±ì— ëŒ€í•´ ëª¨ë“  ì—´ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ë°˜ë“œì‹œ ì…ë ¥í•˜ì§€ ì•Šì•„ë„ ëœë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.

#### Querying
- ì¿¼ë¦¬ : DBì— ì •ë³´ë¥¼ ìš”ì²­í•˜ëŠ” í–‰ë™ì„ ì˜ë¯¸
- RDB : í…Œì´ë¸”ì˜ í˜•ì‹ê³¼ í…Œì´ë¸”ê°„ì˜ ê´€ê³„ì— ë§ì¶° ë°ì´í„°ë¥¼ ìš”ì²­. SQLê³¼ ê°™ì€ êµ¬ì¡°í™”ëœ ì¿¼ë¦¬ ì–¸ì–´ë¥¼ ì •ë³´ ìš”ì²­ì— ì‚¬ìš©
- NoSQL : ë°ì´í„° ê·¸ë£¹ ìì²´ë¥¼ ì¡°íšŒí•˜ëŠ” ê²ƒì— ì´ˆì ì„ ë‘ê³  ìˆë‹¤. êµ¬ì¡°í™”ë˜ì§€ ì•Šì€ ì¿¼ë¦¬ ì–¸ì–´ë¡œë„ ë°ì´í„° ìš”ì²­ì´ ê°€ëŠ¥. -> UnQL(UnStructured Query Language)

#### Scalability
- SQL : ìˆ˜ì§ì ìœ¼ë¡œ í™•ì¥(ë†’ì€ ë©”ëª¨ë¦¬, CPU). ê³ ë¹„ìš©. ë³µìˆ˜ì˜ ì„œë²„ì— ê±¸ì³ DB ê´€ê³„ë¥¼ ì •ì˜í•  ìˆ˜ ìˆì§€ë§Œ ë³µì¡í•˜ê³  ì‹œê°„ì´ ë§ì´ ì†Œëª¨
- NoSQL : ìˆ˜í‰ì ìœ¼ë¡œ í™•ì¥(ê°’ì‹¼ ì„œë²„ ì¦ì„¤, í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ì´ìš©í•˜ëŠ” í™•ì¥). ë§ì€ íŠ¸ë˜í”½ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ NoSQL DBë¥¼ ìœ„í•œ ì„œë²„ë¥¼ ì¶”ê°€ë¡œ êµ¬ì¶•. ì €ë ´í•œ ë²”ìš© í•˜ë“œì›¨ì–´ë‚˜ í´ë¼ìš°ë“œ ê¸°ë°˜ì˜ ì¸ìŠ¤í„´ìŠ¤ì— NoSQL DBë¥¼ í˜¸ìŠ¤íŒ…í•  ìˆ˜ ìˆì–´ì„œ, ìˆ˜ì§ì  í™•ì¥ë³´ë‹¤ ë¹„ìš© íš¨ìœ¨ì„±ì´ ë†’ë‹¤.

### WHAT to CHOOSE
- ì™„ë²½í•œ ì†”ë£¨ì…˜ì€ ì—†ë‹¤.
- ë§ì€ ê°œë°œìëŠ” ì„œë¹„ìŠ¤ì— ë§ê²Œ ëª¨ë‘ ì‚¬ìš©í•œë‹¤.

#### SQL
1. ACID ì„±ì§ˆì„ ì¤€ìˆ˜í•´ì•¼ í•˜ëŠ” ê²½ìš°
  - ì „ì ìƒê±°ë˜, ê¸ˆìœµ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•œ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì—ì„œëŠ” ACIDê°€ í•„ìˆ˜ ì˜µì…˜
2. ì†Œí”„íŠ¸ì›¨ì–´ì— ì‚¬ìš©ë˜ëŠ” ë°ì´í„°ê°€ êµ¬ì¡°ì ì´ê³  ì¼ê´€ì ì¸ ê²½ìš°
  - ë§ì€ ì„œë²„ë¥¼ í•„ìš”ë¡œ í•˜ì§€ ì•ŠëŠ” ê²½ìš°

#### NoSQL
1. ë°ì´í„°ì˜ êµ¬ì¡°ê°€ ê±°ì˜ ë˜ëŠ” ì „í˜€ ì—†ëŠ” ëŒ€ìš©ëŸ‰ì˜ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ê²½ìš°
2. í´ë¼ìš°ë“œ ì»´í“¨íŒ… ë° ì €ì¥ê³µê°„ì„ ìµœëŒ€í•œ í™œìš©í•˜ëŠ” ê²½ìš°
3. ë¹ ë¥´ê²Œ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì¶•í•˜ê³  ë°ì´í„° êµ¬ì¡°ë¥¼ ìì£¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ê²½ìš°

# MongoDB

## ëŒ€í‘œì ì¸ NoSQLì˜ ì¢…ë¥˜

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-09-22 21 35 25](https://user-images.githubusercontent.com/79494088/134344458-1e1f19b7-7c83-4bf8-aea9-439e599fc325.png)

### Key-Value
- ë°ì´í„°ë¥¼ Key-Valueì˜ ìŒì„ ì†ì„±ìœ¼ë¡œ í•˜ëŠ” ë°°ì—´ í˜•íƒœë¡œ ì €ì¥
- KeyëŠ” ì†ì„± ì´ë¦„, ValueëŠ” ì†ì„±ì— ì—°ê²°ëœ ë°ì´í„° ê°’
- cf. Redis, Dynamo

### Document DB
- ë¬¸ì„œì²˜ëŸ¼ ì €ì¥í•˜ëŠ” DB
- JSON ìœ ì‚¬ í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¬¸ì„œí™”
- ê°ê°ì˜ ë¬¸ì„œëŠ” í•˜ë‚˜ì˜ ì†ì„±ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ê°–ê³  ìˆê³ , ì»¬ë ‰ì…˜ì´ë¼ê³  í•˜ëŠ” ê·¸ë£¹ìœ¼ë¡œ ë¬¶ì–´ì„œ ê´€ë¦¬
- cf. MongoDB

### Wide-Column DB
- coulmnì— ëŒ€í•œ ë°ì´í„° ê´€ë¦¬ë¥¼ ì§‘ì¤‘
- ê° ì—´ì— key-value í˜•ì‹ìœ¼ë¡œ ì €ì¥ë˜ê³ , ì»¬ëŸ¼ íŒ¨ë°€ë¦¬ë¼ê³  í•˜ëŠ” ì—´ì˜ ì§‘í•©ì²´ ë‹¨ìœ„ë¡œ ë°ì´í„° ì²˜ë¦¬
- í•˜ë‚˜ì˜ í–‰ì— ë§ì€ ì—´ì„ í¬í•¨í•  ìˆ˜ ìˆì–´ì„œ ë†’ì€ ìœ ì—°ì„±ì„ ìë‘
- ë°ì´í„° ì²˜ë¦¬ì— í•„ìš”í•œ ì—´ì„ ìœ ì—°í•˜ê²Œ ì„ íƒí•  ìˆ˜ ìˆë‹¤ëŠ” ì ì—ì„œ ê·œëª¨ê°€ í° ë°ì´í„° ë¶„ì„ì— ì£¼ë¡œ ì‚¬ìš©ë¨
- cf. Cassandra, HBase

## Document Databases

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-09-22 21 41 12](https://user-images.githubusercontent.com/79494088/134345315-a5094b03-b9e5-40b9-be92-e26422c64bdd.png)

- ë¬¸ì„œëŠ” BSON í˜•íƒœë¡œ ì €ì¥ë˜ê³  ì •í•´ì§„ í‹€ì´ë‚˜ ë°ì´í„° íƒ€ì…ì´ ì—†ë‹¤. -> ììœ ë¡­ê²Œ ë¬¸ì, ìˆ«ì ê°ì²´, ë°°ì—´ ë“±ì„ ì €ì¥í•  ìˆ˜ ìˆë‹¤.
- ì‚¬ì „ì— ì •ì˜ëœ í…Œì´ë¸” í•„ë“œë‚˜ ê´€ê³„ì— ë§ì¶œ í•„ìš” ì—†ì´ ë°ì´í„°ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.
- ë³´í†µì€ ì¼ê´€ë˜ì§€ ì•Šì€ ë°ì´í„°ë¥¼ ì¶”ê°€í•´ì•¼ í•˜ê±°ë‚˜ ì¬ë¹ ë¥´ê²Œ ë°ì´í„°ë¥¼ ìŒ“ì•„ì•¼ í•  ë•Œ ì‚¬ìš©ëœë‹¤.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-09-22 21 42 39](https://user-images.githubusercontent.com/79494088/134345521-94db5534-4d82-4d74-87c2-e7e86bfa7733.png)

- SQLì— ë¹„í•´ ë°ì´í„° íƒ€ì…ì´ë‚˜ í…Œì´ë¸” ê´€ê³„ ë“±ì—ì„œ ë¹„êµì  ììœ ê°€ ìˆì§€ë§Œ, ìŠ¤í‚¤ë§ˆê°€ ì•„ì˜ˆ ì—†ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.
- ê° ë¬¸ì„œë¥¼ ì €ì¥í•  ë•Œ ììœ ë¡­ê²Œ ì €ì¥í•´ë„ ë˜ì§€ë§Œ ê·¸ë§Œí¼ ì¼ì¢…ì˜ ìŠ¤í‚¤ë§ˆê°€ ìˆì–´ì•¼ ìˆ˜ì›”í•˜ê²Œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.

## MongoDB Atlas
- Atlas ë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„±

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-09-22 21 45 00](https://user-images.githubusercontent.com/79494088/134345830-72ec8068-d580-4d36-b224-fe2551080955.png)

# Pymongo
- [pymongo documentation](https://pymongo.readthedocs.io/en/stable/tutorial.html)
- íŒŒì´ì¬ê³¼ ì—°ê²°

```py
URI = 'mongodb+srv://6mini:*****@cluster0.buhiu.mongodb.net/myFirstDatabase?retryWrites=true&w=majority'

from pymongo import MongoClient
# print(MongoClient) # <class 'pymongo.mongo_client.MongoClient'>

client = MongoClient(URI)

# print(client)
'''
MongoClient(host=['cluster0-shard-00-00.buhiu.mongodb.net:27017', 'cluster0-shard-00-01.buhiu.mongodb.net:27017', 'cluster0-shard-00-02.buhiu.mongodb.net:27017'], document_class=dict, tz_aware=False, connect=True, retrywrites=True, w='majority', authsource='admin', replicaset='atlas-7sgtwy-shard-0', ssl=True)
'''

DB = 'myFirstDatabase'

db = client[DB] # ì—°ê²°í•œ í´ë¼ì´ì–¸íŠ¸ ê°ì²´ì˜ í•„ë“œë¡œ DB ìƒì„±/ì„ íƒ

COLL = '6mini-collection'

coll = db[COLL] # DB ì½œë ‰ì…˜ ì¡°ì‘

# print(coll)
'''
Collection(Database(MongoClient(host=['cluster0-shard-00-01.buhiu.mongodb.net:27017', 'cluster0-shard-00-02.buhiu.mongodb.net:27017', 'cluster0-shard-00-00.buhiu.mongodb.net:27017'], document_class=dict, tz_aware=False, connect=True, retrywrites=True, w='majority', authsource='admin', replicaset='atlas-7sgtwy-shard-0', ssl=True), 'myFirstDatabase'), '6mini-collection')
'''

coll.insert_one(document={'hello': '6mini'})
```

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-09-22 22 04 37](https://user-images.githubusercontent.com/79494088/134348756-c78294cf-a1f4-4c1f-ac25-70f2cf76482f.png)

- ë¬¸ì„œë¥¼ ì…ë ¥í•  ë•Œ JSON í˜•íƒœë¡œ ì¶”ê°€í•˜ë©´ ëœë‹¤.
- SQLì—ì„œ Primary keyë¥¼ ì´ìš©í•´ ë ˆì½”ë“œë¥¼ êµ¬ë¶„í–ˆë‹¤ë©´ MongoDBì—ì„œëŠ” ê° ë¬¸ì„œì— ê³ ìœ ë²ˆí˜¸ë¥¼ ë¶€ì—¬í•œë‹¤.
  - `_id` ì•ˆì— `ObjectId`ë¼ëŠ” ê°’ì´ ìˆë‹¤.

```py
doc = coll.find_one()

print(doc)
'''
{'_id': ObjectId('614b28ec8ac8de52d42de5bd'), 'hello': '6mini'}
'''
```

- í•´ë‹¹ ê³ ìœ ë²ˆí˜¸ëŠ” ë³€ê²½í•  ìˆ˜ ìˆë‹¤. ì„ì˜ë¡œ ì •í•œ ê°’ì´ ë  ìˆ˜ ìˆì§€ë§Œ ì¤‘ë³µë˜ì–´ì„œëŠ” ì•ˆ ëœë‹¤.
- ì¶”ê°€ í‚¤ì›Œë“œ
  - MongoDB local Install
  - MongoDB Cluster
  - CF NoSQL

# Reference
- [XML, JSON, YAMLì´ ë­”ê°€ìš”?](https://youtu.be/55FrHTNjTCc)
- [7 Database Paradigms](https://www.youtube.com/watch?v=W2Z7fbCLSTw)
- [NoSQL Database Types](https://phoenixnap.com/kb/nosql-database-types)