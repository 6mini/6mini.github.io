---
title: "[빅데이터 처리 입문] 빅데이터 플랫폼과 아키텍쳐에 대한 이해, 데이터 파이프라인"
description: 빅데이터에 대한 정의와 3대 요소, 3V의 개념 및 빅데이터의 필요성과 기업들의 활용 사례, 빅데이터 플랫폼의 정의와 필요성, 빅데이터 아키텍쳐와 각 단계에 맞는 프로젝트에 대한 간략한 예시, 데이터 파이프라인의 정의
categories:
 - Spark & Hadoop
tags: [Spark, Hadoop, 빅데이터, 플랫폼, 아키텍쳐]
mathjax: enable
---

# Overview

![image](https://user-images.githubusercontent.com/79494088/186553876-c1b2324a-3ad2-4762-9b4c-ad8368120c57.png)

- 현재는 바야흐로 데이터의 시대이다.
- 포브스에 따르면 2025년에는 연간 175ZB의 데이터가 생산될 것이라고 예측하고 있다.

## ZB(Zettabyte)
- ZB(Zettabyte)에 대한 크기가 가늠이 가지 않을 것이다.
- 아래 예시를 본다면 어느정도 어마한 양인지 짐작할 수 있을 것이다.

![image](https://user-images.githubusercontent.com/79494088/186554061-997b5297-3270-4465-b5b4-58ee35632c24.png)

## 분당 발생하는 데이터 수
- 각 기업에서 분당 발생하는 데이터 수는 아래와 같다.
    - Google: 570만의 검색
    - Facebook: 24만 건의 사진 공유
    - Amazon: 사용자가 28만 달러 어치 구매
    - Slack: 15만 건의 메시지 전송
    - Twitter: 57만 건의 트윗
    - Tiktok: 1억 6천만 건 이상의 비디오 시청
- 이 처럼 현대는 엄청난 향의 데이터가 생산되고 있다.

## 빅데이터의 정의
- "기존의 데이터 처리 응용 소프트웨어로는 수집, 저장, 분석, 처리하기 어려울 정도로 방대한 양의 데이터", "데이터로부터 가치를 추출하고 결과를 분석하는 기술" - wikipedia

## 빅데이터의 3대 요소

![image](https://user-images.githubusercontent.com/79494088/186554346-ab536bcb-e582-4c5e-a954-2543da7a4ec8.png)

### 3V
- Volume(양): 빅데이터에서는 TB, PB 등의 큰 양을 의미한다.
- Velocity(속도): 생성되는 시점부터 처리 결과가 사용자에게 전달되는 시점이 점점 짧아지고 있다. 빠른 시간에 수집, 처리, 분석까지 이루어져야하는 것을 뜻한다.
- Variety(다양성): 다양한 소스로부터 다양한 형식의 데이터를 처리할 수 있어야 한다. 이러한 데이터를 저장하고 처리할 수 있는 기술이 도입되어야 한다. 다양한 데이터를 진정으로 활용하여 가치를 찾아야한다.

## 빅데이터의 필요성
- 빠르고 더 나은 의사 결정을 지원한다.
- 새로운 전략과 제품을 구축한다.
- 고객에 관한 통찰력을 향상한다.
- 데이터를 기반으로 가까운 미래를 예측하고 새로운 기회를 창출한다.
- 비즈니스 환경에서 도움을 줄 수 있는 것들이 굉장히 많다.

## 기업들의 데이터 활용 사례
- 페이스북: 소셜 네트워킹 분석 및 광고를 최적화한다.
- 아마존: 고객에게 제품을 추천한다.
- 넷플릭스: 컨텐츠를 추천한다.
- 우버: 예측을 통해 배차 시스템을 최적화한다.
- 오늘날의 대부분 기업들이 데이터를 활용하여 비즈니스에 적용하고 있다.

## 빅데이터 플랫폼의 필요성
- 대부분의 기업이 데이터 분석과 예측을 위한 플랫폼 구축이 필요하다.
- 데이터 분석과 예측을 위한 기반을 마련하는데 필수이기 때문이다.
- 데이터를 잘 모으고 관리해야 한다.

# 빅데이터 플랫폼

## 플랫폼이란?
- 많은 사람들이 쉽게 이용할 수 있고 다양한 목적의 비즈니스가 이루어지는 공간이다.

### 하드웨어 플랫폼
- 동일한 제품을 일정한 품질로 만드는 프로세스와 그 제품을 만드는 장치이다.
    - ex) 자동차

### 소프트웨어 플랫폼

![image](https://user-images.githubusercontent.com/79494088/186555115-e5aece02-3a65-49e1-bd44-662aa183a01f.png)

- 소프트웨어를 실행할 수 있는 기반이나 환경이다.

### 서비스 플랫폼

![image](https://user-images.githubusercontent.com/79494088/186555184-278c3298-685a-4db9-b988-057c5113c20b.png)

- 서비스 제공자의 서비스를 다른 서비스들이 쉽게 사용할 수 있게 해주는 환경이다.

## 빅데이터 플랫폼
- 기업 내의 많은 사용자들이 데이터를 처리하고 분석을 쉽게 할 수 있는 환경을 제공해주는 시스템이다.

### 빅데이터 플랫폼의 요구사항
- 데이터 수집, 처리 및 저장이 용이해야한다.
- 데이터를 발견, 검색, 보안을 제공해야한다.
- 데이터 분석 및 ML을 지원해야한다.

![image](https://user-images.githubusercontent.com/79494088/186555371-941adc64-0dd0-435c-8389-d98116248844.png)

# 빅데이터 아키텍처

![image](https://user-images.githubusercontent.com/79494088/186557407-dcd3aacc-531d-4539-94c1-33c9dcdb3dd3.png)

- 보통 빅데이터 아키텍처는 소스(Source) -> 수집(Ingestion & Processing) -> 적재(Storage) -> 분석(Analytics & Prediction) -> 아웃풋(Output)의 순으로 흐르게 된다.
- 각 단계에 맞는 프로젝트를 알아볼 것이다.

## 소스
- 서비스로부터 발생되는 운영 데이터나 비즈니스 데이터가 발생된다.
- 데이터의 소스는 굉장히 다양하다.

### 데이터의 종류
- 정형(Structured) 데이터
    - RDBMS, 스프레드시트 등
- 비정형(Unstructured) 데이터
    - 텍스트, 이미지, 음성, 영상 등
- 반정형(Semi-structured) 데이터
    - JSON, XML, 웹 로그, 센서 데이터 등

#### 데이터 소스의 종류
- 데이터베이스(앱이나 내부 시스템)
    - OLTP(Online Transaction Processing): 현재의 데이터 처리가 얼마나 정확하고, 무결한지가 중요하다. 그렇기 때문에 주로 데이터의 저장, 삭제, 수정 등의 실질적인 데이터를 수정하는 작업을 의미하는 용어이다.
    - OLAP(Online Analytical Processing): 이미 저장된 데이터를 바탕으로 어떤 정보를 제공하는지가 중요하다. 따라서 OLAP는 데이터가 무결하고, 정확하다는 전재를 바탕으로 고객 또는 사용자가 원하는 정보를 어떤식으로 표현하고 제공하는지를 의미하는 용어이다. 
    - 출처: [꿍스뿡이의 드림빌더](https://too612.tistory.com/511 )

![image](https://user-images.githubusercontent.com/79494088/187110624-51da9084-9ecb-4d88-82c3-ff9a5449fbf4.png)

- 이벤트 컬렉터: 데이터베이스가 비즈니스에서 나온 데이터였다미면, 이벤트 컬렉터는 사용자가 만드는 데이터이다.
- 로그: 웹 서버나 운영중인 서비스의 로그이다.
- API: 외부 서비스로부터 데이터를 가져온다.
- 파일, 오브젝트 스토리지 등이 있다.

## 데이터 수집과 처리(ETL이 이루어지는 단계)
- 배치형 데이터 수집: 어딘가에 존재하는 데이터를 정리하여 추출하는 방법이다. 지속적, 주기적으로 진행하기 때문에 워크플로우 관리 툴이 필요하다.
    - 데이터베이스
    - 파일
    - MapReduce, Spark, Hive 등
- 스트리밍형 데이터 수집: 보통 NoSQL을 이용하거나, 메세지 큐를 사용하는 방법 등이 있다.
    - 애플리케이션 이벤트
    - 로그
    - 센서 데이터
    - Flink, Spark, Kafka 등
- Flume, Scoop, Kafka, Nifi, Fluentd 등을 이용한다.

### Lambda vs Kappa

![image](https://user-images.githubusercontent.com/79494088/187111853-92073b5a-a991-4ffc-ab6d-c4cb8bef1d06.png)

## 데이터 저장
- 데이터 웨어하우스(Data Warehouse): 보고를 위해 설계된 구조화된 데이터 모델을 제공한다. 데이터 웨어하우스에 저장하기 전에 처리되어야 한다. 이때 데이터 웨어하우스에 어떤 데이터를 포함할지 결정하게 되는데, 이를 "쓰기 스키마(schema on write)"라고 한다.
    - Google BigQuery
    - Amazon Redshift
    - Snoflake 등
- 데이터 레이크(Data Lake): 현재 정의된 용도가 없는 비정형 원시 데이터를 저장한다. Low한 형태로 방대히 저장되는 것이 일반적이다.
    - Amazon S3 등


## 데이터 분석 및 예측
- Interactive Query Engine
    - trino
    - presto
    - cloudera 등
- Realtime Analytics
    - druid
    - pinot 등
- ML
    - Spark
    - Amazon SageMaker
    - Azure ML 등

## Output
- 목적
    - 데이터 기반의 의사결정(비즈니스 의사 결정)
    - 데이터 기반 애플리케이션(프로덕트 향상)
- 대시보드
    - Tableau
    - Superset
    - Redash 등

## Workflow Management
- Airflow 등

# 파이프라인이란?
- 하나의 데이터 처리 단계의 출력이 다음 단계의 입력으로 이어지는 형태로 연결된 구조이다.
- 다양한 소스에서 데이터를 변환하고 옮기는 일련의 과정을 구성한 시스템이다.

## WHY?
- 데이터 기반의 의사 결정을 위함이다.
    - 비즈니스 데이터 분석
    - 리포팅 등
- 데이터 기반 애플리케이션을 위함이다.
    - 머신러닝, 데이터 사이언스 등

## WHO?
- 주로 데이터 팀 내 데이터 엔지니어가 담당하여 구현한다.

# 데이터 파이프라인 패턴

## 데이터 레이크(Data Lake)
- 1단계: 원본 데이터
- 2단계: 분석용 데이터
- 3단계: 피처 데이터(ML, AI) / 집계 데이터

# 데이터 파이프라인 오케스트레이션
- 여러 개의 컴퓨터 시스템, 애플리케이션 또는 서비스를 조율하고 관리하는 것이다.
- 복잡한 테스크와 워크 플로우를 쉽게 관리할 수 있도록 도와준다.

![image](https://user-images.githubusercontent.com/79494088/187340627-3bf82235-e391-4410-aba0-b15282d94027.png)

## 워크 플로우 관리 도구의 필요성
- 스크립트에 한계가 있다.
    - 워크 플로우가 복잡한다.
    - 테스크의 이존 관계가 복잡하다.
    - 실패 시 처리가 어렵다.

## 워크 플로우 관리 도구 기능
- 스케쥴링
- 테스크 의존 관계 정의
- 실행 결과 알림 및 보관
- 실패 시 재실행

## 비교

![image](https://user-images.githubusercontent.com/79494088/187340854-f18d5b43-1dcb-432a-b164-8884f30959ef.png)
